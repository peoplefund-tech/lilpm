# ğŸ” ì¸ì¦

> ì•ˆì „í•œ ì‚¬ìš©ì ì¸ì¦ ë° íŒ€ ì ‘ê·¼ ê´€ë¦¬

## ê°œìš”

LilPMì€ Supabase Authë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì´ë©”ì¼/ë¹„ë°€ë²ˆí˜¸ ì¸ì¦ì„ ì œê³µí•©ë‹ˆë‹¤. íšŒì›ê°€ì… í›„ ì´ë©”ì¼ ì¸ì¦ì´ í•„ìš”í•©ë‹ˆë‹¤.

## ì¸ì¦ í”Œë¡œìš°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   íšŒì›ê°€ì…   â”‚ â”€â”€â†’ â”‚ ì´ë©”ì¼ ì¸ì¦  â”‚ â”€â”€â†’ â”‚   íŒ€ ìƒì„±   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
                    ì¸ì¦ ë§í¬ í´ë¦­
                          â”‚
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    ë¡œê·¸ì¸    â”‚ â†â”€â”€ â”‚ ì˜¨ë³´ë”© ì™„ë£Œ  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ì£¼ìš” ê¸°ëŠ¥

### 1. ì´ë©”ì¼ ì¸ì¦

íšŒì›ê°€ì… í›„ ì´ë©”ì¼ ì¸ì¦ì´ í•„ìš”í•©ë‹ˆë‹¤:

```typescript
// authStore.ts
signup: async (email, password, name) => {
  const { data, error } = await supabase.auth.signUp({
    email,
    password,
    options: {
      emailRedirectTo: `${siteUrl}/onboarding/create-team`,
      data: { name },
    },
  });
  
  // ì¸ì¦ ëŒ€ê¸° í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸
  navigate('/auth/verify-email');
}
```

### 2. ì¸ì¦ ìƒíƒœ ê´€ë¦¬

```typescript
interface AuthState {
  user: User | null;
  isAuthenticated: boolean;
  isEmailVerified: boolean;
  isLoading: boolean;
}
```

### 3. ë¼ìš°íŠ¸ ë³´í˜¸

```tsx
// App.tsx
<Route element={<ProtectedRoute />}>
  <Route element={<OnboardingCheck />}>
    <Route path="/" element={<HomePage />} />
  </Route>
</Route>

// ProtectedRoute - ë¡œê·¸ì¸ í•„ìˆ˜
// OnboardingCheck - ì´ë©”ì¼ ì¸ì¦ + íŒ€ ì¡´ì¬ í™•ì¸
```

## í˜ì´ì§€ êµ¬ì„±

### íšŒì›ê°€ì… (`/signup`)
- ì´ë¦„, ì´ë©”ì¼, ë¹„ë°€ë²ˆí˜¸ ì…ë ¥
- ê°€ì… í›„ `/auth/verify-email`ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸

### ì´ë©”ì¼ ì¸ì¦ ëŒ€ê¸° (`/auth/verify-email`)
- ì¸ì¦ ì´ë©”ì¼ ë°œì†¡ ì•ˆë‚´
- "ì¸ì¦ ì´ë©”ì¼ ì¬ë°œì†¡" ë²„íŠ¼
- ì¸ì¦ ì™„ë£Œ ì‹œ ìë™ ë¦¬ë‹¤ì´ë ‰íŠ¸

### ë¡œê·¸ì¸ (`/login`)
- ì´ë©”ì¼, ë¹„ë°€ë²ˆí˜¸ ì…ë ¥
- ë¯¸ì¸ì¦ ì‚¬ìš©ìëŠ” `/auth/verify-email`ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸
- íŒ€ ì—†ìœ¼ë©´ `/onboarding/create-team`ìœ¼ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸

### ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì • (`/password-reset`)
- ì´ë©”ì¼ ì…ë ¥ìœ¼ë¡œ ì¬ì„¤ì • ë§í¬ ë°œì†¡

## ì˜¨ë³´ë”© í”Œë¡œìš°

ì¸ì¦ ì™„ë£Œ í›„ ì˜¨ë³´ë”© ë‹¨ê³„:

1. **íŒ€ ìƒì„±** (`/onboarding/create-team`)
   - íŒ€ ì´ë¦„ ì…ë ¥
   - íŒ€ URL slug ì„¤ì •

2. **AI ì„¤ì •** (`/onboarding/ai-setup`)
   - AI API í‚¤ ì…ë ¥ (ì„ íƒ)
   - ê¸°ë³¸ AI ëª¨ë¸ ì„ íƒ

## ê¶Œí•œ ê´€ë¦¬

### íŒ€ ì—­í• 

| ì—­í•  | ê¶Œí•œ |
|------|------|
| **Owner** | ëª¨ë“  ê¶Œí•œ, íŒ€ ì‚­ì œ |
| **Admin** | ë©¤ë²„ ê´€ë¦¬, ì„¤ì • ë³€ê²½ |
| **Member** | ì´ìŠˆ/PRD ìƒì„± ë° í¸ì§‘ |

### íŒ€ ì´ˆëŒ€

```typescript
// ì´ˆëŒ€ ë§í¬ ìƒì„±
const inviteLink = `${siteUrl}/auth/accept-invite?token=${inviteToken}`;

// ì´ˆëŒ€ ìˆ˜ë½ ì²˜ë¦¬
acceptInvite(token: string): Promise<void>
```

## ë³´ì•ˆ ê³ ë ¤ì‚¬í•­

- âœ… ë¹„ë°€ë²ˆí˜¸ëŠ” Supabaseì—ì„œ bcrypt í•´ì‹±
- âœ… JWT í† í° ê¸°ë°˜ ì„¸ì…˜ ê´€ë¦¬
- âœ… ì´ë©”ì¼ ì¸ì¦ í•„ìˆ˜
- âœ… API í‚¤ëŠ” ì„œë²„ ì‚¬ì´ë“œ ì•”í˜¸í™” ì €ì¥
- âœ… Row Level Security (RLS) ì ìš©

---

**ê´€ë ¨ ë¬¸ì„œ**
- [í”„ë¡ íŠ¸ì—”ë“œ ì•„í‚¤í…ì²˜](../architecture/frontend.md)
- [ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ](../architecture/database.md)
